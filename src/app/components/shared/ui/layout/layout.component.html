<div class="flex h-screen bg-gray-50">
  <div
    *ngIf="isLoggingOut"
    class="fixed inset-0 bg-black/80 backdrop-blur-sm z-50 flex items-center justify-center transition-all duration-300"
  >
    <div
      class="bg-white rounded-xl p-8 shadow-2xl border border-gray-200 flex flex-col items-center space-y-5"
    >
      <div class="relative">
        <div
          class="animate-spin rounded-full h-14 w-14 border-4 border-[#6bb6c7] border-t-[#2a5f6b]"
        ></div>
      </div>
      <div class="text-center">
        <p class="text-gray-900 font-semibold text-lg">Cerrando sesión...</p>
        <p class="text-sm text-gray-600">Guardando tus datos</p>
      </div>
    </div>
  </div>

  <div
    [class]="sidebarCollapsed ? 'w-16' : 'w-72'"
    class="bg-[#3a8a9c] shadow-xl border-r border-[#2a5f6b] flex flex-col transition-all duration-300"
  >
    <div
      class="border-b border-[#2a5f6b] h-[90px] min-h-[90px] flex flex-col justify-center relative"
    >
      <div
        [class]="
          sidebarCollapsed
            ? 'flex justify-center items-center'
            : 'flex items-center'
        "
      >
        <img
          *ngIf="!sidebarCollapsed"
          src="logo.png"
          alt="Mentorium Logo"
          class="size-9 inline-block align-middle ml-2"
        />
        <div [class]="sidebarCollapsed ? 'text-center te' : 'pl-3'">
          <h1
            [class]="sidebarCollapsed ? 'text-[28px]' : 'text-2xl'"
            class="font-bold text-white transition-all duration-300"
          >
            <span>
              <img
                *ngIf="sidebarCollapsed"
                src="logo.png"
                alt="Mentorium Logo"
                class="h-9 inline-block align-middle mr-0.5"
              />
              <span *ngIf="!sidebarCollapsed">Mentorium</span>
            </span>
          </h1>
          <p
            *ngIf="!sidebarCollapsed"
            class="text-sm text-[#9dd4e0] mt-1 transition-opacity duration-300"
          >
            Panel de Control
          </p>
        </div>
      </div>

      <button
        (click)="toggleSidebar()"
        class="absolute top-1/2 -right-3 transform -translate-y-1/2 w-6 h-6 bg-[#2a5f6b] rounded-full flex items-center justify-center shadow-md hover:bg-[#6bb6c7] transition-colors duration-200 z-10 cursor-pointer"
        title="Alternar sidebar"
      >
        <svg
          [class]="sidebarCollapsed ? 'rotate-180' : ''"
          class="w-3 h-3 text-white transition-transform duration-300"
          fill="none"
          stroke="currentColor"
          viewBox="0 0 24 24"
        >
          <path
            stroke-linecap="round"
            stroke-linejoin="round"
            stroke-width="2"
            d="M15 19l-7-7 7-7"
          />
        </svg>
      </button>
    </div>
    <nav class="flex-1 px-2 py-6 space-y-2">
      <a
        routerLink="/dashboard/"
        routerLinkActive="bg-[#2a5f6b] text-white shadow-md"
        [routerLinkActiveOptions]="{ exact: true }"
        [class]="sidebarCollapsed ? 'justify-center' : 'justify-start'"
        class="flex items-center px-4 py-3 text-[#9dd4e0] rounded-lg hover:bg-[#2a5f6b] hover:text-white transition-all duration-200 group cursor-pointer"
        [title]="sidebarCollapsed ? 'Página de inicio' : ''"
      >
        <svg
          xmlns="http://www.w3.org/2000/svg"
          fill="none"
          viewBox="0 0 24 24"
          stroke-width="1.5"
          stroke="currentColor"
          class="size-6 flex-shrink-0"
        >
          <path
            stroke-linecap="round"
            stroke-linejoin="round"
            d="m2.25 12 8.954-8.955c.44-.439 1.152-.439 1.591 0L21.75 12M4.5 9.75v10.125c0 .621.504 1.125 1.125 1.125H9.75v-4.875c0-.621.504-1.125 1.125-1.125h2.25c.621 0 1.125.504 1.125 1.125V21h4.125c.621 0 1.125-.504 1.125-1.125V9.75M8.25 21h8.25"
          />
        </svg>
        <span
          *ngIf="!sidebarCollapsed"
          class="ml-3 font-medium transition-opacity duration-300"
        >
          Inicio
        </span>
      </a>

      <a
        routerLink="/dashboard/users"
        routerLinkActive="bg-[#2a5f6b] text-white shadow-md"
        [class]="sidebarCollapsed ? 'justify-center' : 'justify-start'"
        class="flex items-center px-4 py-3 text-[#9dd4e0] rounded-lg hover:bg-[#2a5f6b] hover:text-white transition-all duration-200 group cursor-pointer"
        [title]="sidebarCollapsed ? 'Historial' : ''"
      >
        <svg
          xmlns="http://www.w3.org/2000/svg"
          width="24"
          height="24"
          viewBox="0 0 24 24"
          class="flex-shrink-0"
        >
          <path
            fill="currentColor"
            d="M13.5 8H12v5l4.28 2.54l.72-1.21l-3.5-2.08zM13 3a9 9 0 0 0-9 9H1l3.96 4.03L9 12H6a7 7 0 0 1 7-7a7 7 0 0 1 7 7a7 7 0 0 1-7 7c-1.93 0-3.68-.79-4.94-2.06l-1.42 1.42A8.9 8.9 0 0 0 13 21a9 9 0 0 0 9-9a9 9 0 0 0-9-9"
          />
        </svg>
        <span
          *ngIf="!sidebarCollapsed"
          class="ml-3 font-medium transition-opacity duration-300"
        >
          Historial de accesos
        </span>
      </a>

      <a
        routerLink="/dashboard/new"
        routerLinkActive="bg-[#2a5f6b] text-white shadow-md"
        [class]="sidebarCollapsed ? 'justify-center' : 'justify-start'"
        class="flex items-center px-4 py-3 text-[#9dd4e0] rounded-lg hover:bg-[#2a5f6b] hover:text-white transition-all duration-200 group cursor-pointer"
        [title]="sidebarCollapsed ? 'Crear nueva tarea' : ''"
      >
        <svg
          xmlns="http://www.w3.org/2000/svg"
          class="size-6 flex-shrink-0"
          width="32"
          height="32"
          viewBox="0 0 32 32"
        >
          <path
            fill="currentColor"
            d="M16 3C8.832 3 3 8.832 3 16s5.832 13 13 13s13-5.832 13-13S23.168 3 16 3m0 2c6.087 0 11 4.913 11 11s-4.913 11-11 11S5 22.087 5 16S9.913 5 16 5m-1 5v5h-5v2h5v5h2v-5h5v-2h-5v-5z"
          />
        </svg>
        <span
          *ngIf="!sidebarCollapsed"
          class="font-medium ml-3 transition-opacity duration-300"
        >
          Nueva Tarea
        </span>
      </a>
    </nav>

    <div class="py-4 px-2 border-t border-[#2a5f6b] bg-[#2a5f6b]">
      <div
        [class]="sidebarCollapsed ? 'justify-center mb-2' : 'mb-4'"
        class="flex items-center px-2 transition-all duration-300"
      >
        <div
          class="w-9 h-9 bg-[#6bb6c7] rounded-full flex items-center justify-center shadow-sm flex-shrink-0"
        >
          <span class="text-[#2a5f6b] text-sm font-bold">{{
            getUserInitials()
          }}</span>
        </div>
        <div
          *ngIf="!sidebarCollapsed"
          class="flex-1 min-w-0 ml-3 transition-opacity duration-300"
        >
          <p class="text-sm font-medium text-white truncate">
            {{ currentUserName }}
          </p>
          <p class="text-xs text-[#9dd4e0] truncate">{{ currentUserEmail }}</p>
        </div>
      </div>

      <button
        (click)="confirmLogout()"
        [class]="sidebarCollapsed ? 'justify-center px-2' : 'px-4'"
        class="w-full flex items-center py-3 text-white hover:bg-[#6bb6c7] hover:text-[#1a1a1a] rounded-lg transition-all duration-200 group cursor-pointer"
        [title]="sidebarCollapsed ? 'Cerrar sesión' : ''"
      >
        <svg
          class="w-5 h-5 group-hover:scale-105 transition-transform duration-200 flex-shrink-0"
          fill="none"
          stroke="currentColor"
          viewBox="0 0 24 24"
          [class]="sidebarCollapsed ? 'ml-[5px]' : ''"
        >
          <path
            stroke-linecap="round"
            stroke-linejoin="round"
            stroke-width="2"
            d="M17 16l4-4m0 0l-4-4m4 4H7m6 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h4a3 3 0 013 3v1"
          />
        </svg>
        <span
          *ngIf="!sidebarCollapsed"
          class="text-sm font-medium ml-3 transition-opacity duration-300"
        >
          Cerrar Sesión
        </span>
      </button>
    </div>
  </div>

  <div class="flex-1 flex flex-col overflow-hidden">
    <header
      class="bg-[#3a8a9c] shadow-2xl border-b border-[#2a5f6b] px-6 h-[90px] min-h-[90px]"
    >
      <div class="flex items-center justify-between w-full h-full">
        <div>
          <h2 class="text-xl font-bold text-white">{{ getPageTitle() }}</h2>
          <p class="text-sm text-[#9dd4e0] mt-1">{{ getPageDescription() }}</p>
        </div>

        <div class="flex items-center space-x-6">
          <div class="text-right bg-[#2a5f6b] rounded-lg px-4 py-2 shadow-sm">
            <p class="text-sm text-[#9dd4e0] font-medium">
              {{ getCurrentDate() }}
            </p>
            <p class="text-xl font-semibold text-white tracking-wide">
              {{ getCurrentTime() }}
            </p>
          </div>

          <div
            class="w-10 h-10 bg-[#6bb6c7] rounded-full flex items-center justify-center shadow-md"
          >
            <span class="text-[#2a5f6b] text-sm font-bold">{{
              getUserInitials()
            }}</span>
          </div>
        </div>
      </div>
    </header>

    <main class="flex-1 overflow-auto bg-gray-50 flex flex-col">
      <div class="flex-1 p-6">
        <router-outlet></router-outlet>
      </div>

      <!-- Footer -->
      <footer class="bg-white border-t border-gray-200 py-4 px-6 mt-auto">
        <div class="flex items-center justify-center">
          <div class="flex items-center gap-2 text-gray-600">
            <img src="logo.png" alt="Mentorium Logo" class="w-6 h-6" />
            <span class="font-semibold text-[#2a5f6b]">Mentorium</span>
            <span class="text-gray-400">•</span>
            <span class="text-sm font-medium">v2.0.1</span>
            <span class="text-gray-400">•</span>
            <span class="text-sm font-medium">© 2025</span>
            <span class="text-gray-400">•</span>
            <span class="text-sm">Todos los derechos reservados</span>
            <span class="text-gray-400">•</span>
            <span class="text-sm">Desarrollado por Andrés Gómez</span>
          </div>
        </div>
      </footer>
    </main>
  </div>
</div>